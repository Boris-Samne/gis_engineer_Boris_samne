<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Tests for index.html</title>
    <style>
        body { font-family: sans-serif; }
        #results { list-style-type: none; padding: 0; }
        .success { color: green; }
        .failure { color: red; }
        #iframe-container {
            width: 100%;
            height: 500px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Unit Tests for index.html</h1>
    <div id="iframe-container">
        <iframe id="test-frame" src="index.html" width="100%" height="100%" frameborder="0"></iframe>
    </div>
    <ul id="results"></ul>

    <script>
        const iframe = document.getElementById('test-frame');
        const resultsList = document.getElementById('results');

        const addTestResult = (description, passed) => {
            const li = document.createElement('li');
            li.textContent = description;
            li.className = passed ? 'success' : 'failure';
            resultsList.appendChild(li);
        };

        const runTests = () => {
            const doc = iframe.contentDocument || iframe.contentWindow.document;

            // 1. Test for a title tag
            const title = doc.querySelector('title');
            addTestResult('Page should have a title', title && title.textContent.length > 0);

            // 2. Test for the hero section
            const heroSection = doc.querySelector('#hero');
            addTestResult('Hero section with id="hero" should exist', heroSection !== null);

            // 3. Test for the main navigation menu
            const navMenu = doc.querySelector('#navmenu');
            addTestResult('Navigation menu with id="navmenu" should exist', navMenu !== null);
            
            // 4. Test for navigation links
            const navLinks = doc.querySelectorAll('#navmenu a');
            addTestResult('Navigation menu should contain links', navLinks.length > 0);

            // 5. Test for the presence of different sections
            const sections = ['about', 'resume', 'portfolio', 'services', 'contact'];
            sections.forEach(sectionId => {
                const section = doc.querySelector(`#${sectionId}`);
                addTestResult(`Section with id="${sectionId}" should exist`, section !== null);
            });
            
            // 6. Test for accessibility: all images should have alt attributes
            const images = doc.querySelectorAll('img');
            let allImagesHaveAlt = true;
            images.forEach(img => {
                if (!img.hasAttribute('alt') || img.getAttribute('alt').trim() === '') {
                    allImagesHaveAlt = false;
                    console.error('Image without alt text:', img);
                }
            });
            addTestResult('All images should have a non-empty alt attribute for accessibility', allImagesHaveAlt);

            // 7. Test for broken links
            const links = doc.querySelectorAll('a');
            let brokenLinks = [];
            const linkPromises = Array.from(links).map(link => {
                const href = link.getAttribute('href');
                if (href && !href.startsWith('#') && !href.startsWith('mailto:') && !href.startsWith('tel:')) {
                    // This is a simplified check. A full check would require a fetch request, 
                    // which can be blocked by CORS policy.
                    // A more robust solution would involve a backend service to check the links.
                    return Promise.resolve(true);
                }
                return Promise.resolve(true);
            });
            
            Promise.all(linkPromises).then(results => {
                const allLinksValid = results.every(res => res);
                addTestResult('All links should be valid (simplified check)', allLinksValid);
            });
        };

        iframe.onload = runTests;
    </script>
</body>
</html>
